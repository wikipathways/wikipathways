function load(e,t,i){"string"==typeof e&&(i=t,t=e,e=document);var o=e.createElement("script");return o.type="text/javascript",o.src=t,i&&onLoad(o,i),o.onLoad=function(e){return onLoad(o,e)},e.body.appendChild(o),o}function polyfillLoader(e,t,i){if(window[t]=function(){return i(null)},document.body)load(e);else{var o=document.onreadystatechange;document.onreadystatechange=function(){"interactive"===document.readyState&&("function"==typeof o&&o(),load(e))}}}polyfillLoader("//cdn.polyfill.io/v1/polyfill.min.js?features=Array.prototype.indexOf&callback=polyfillServiceCallbackpvjsdiffviewer","polyfillServiceCallbackpvjsdiffviewer",function(){require=function e(t,i,o){function n(a,l){if(!i[a]){if(!t[a]){var d="function"==typeof require&&require;if(!l&&d)return d(a,!0);if(s)return s(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var r=i[a]={exports:{}};t[a][0].call(r.exports,function(e){var i=t[a][1][e];return n(i?i:e)},r,r.exports,e,t,i,o)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({"./lib/diff-viewer/diff-viewer.js":[function(e){(function(t){var i=(e("fs"),e("insert-css")),o=t("LmthYXZpby1kaWZmdmlld2VyIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgaGVpZ2h0OiA1MDBweDsKICBib3JkZXI6IDFweCBzb2xpZCAjMDAwOwp9Cgoua2FhdmlvLWRpZmZ2aWV3ZXIgLnBhbmUgewogIGZsb2F0OiBsZWZ0OwogIG92ZXJmbG93OiBoaWRkZW47CiAgd2lkdGg6IDUwJTsKICBoZWlnaHQ6IDEwMCU7Cn0KCi5rYWF2aW8tZGlmZnZpZXdlciAucGFuZS5wYW5lLWxlZnQgewp9Cgoua2FhdmlvLWRpZmZ2aWV3ZXIgLnBhbmUucGFuZS1sZWZ0IC5wYW5lLWlubmVyIHsKICBtYXJnaW4tcmlnaHQ6IDEyMHB4Owp9CgoKLmthYXZpby1kaWZmdmlld2VyIC5wYW5lLnBhbmUtcmlnaHQgewp9Cgoua2FhdmlvLWRpZmZ2aWV3ZXIgLnBhbmUucGFuZS1yaWdodCAucGFuZS1pbm5lciB7CiAgbWFyZ2luLWxlZnQ6IDEyMHB4Owp9Cgoua2FhdmlvLWRpZmZ2aWV3ZXIgLnBhbmUucGFuZS1jZW50ZXIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogNTAlOwogIHdpZHRoOiAyNDBweDsKICBtYXJnaW46IDAgMCAwIC0xMjBweDsKICBvdmVyZmxvdy14OiBoaWRkZW47CiAgb3ZlcmZsb3cteTogYXV0bzsKfQoKLmthYXZpby1kaWZmdmlld2VyIC5wYW5lLWlubmVyIHsKICBoZWlnaHQ6IDEwMCU7Cn0KCi8qKioqKioqKioqKioqKgogIE92ZXJsYXkKICoqKioqKioqKioqKioqLwoKLmthYXZpby1kaWZmdmlld2VyID4gLm92ZXJsYXkgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgbGVmdDogMDsKICBib3R0b206IDA7CiAgcmlnaHQ6IDA7CiAgYmFja2dyb3VuZDogI2ZmZjsKfQoKLmthYXZpby1kaWZmdmlld2VyID4gLm92ZXJsYXkgLmFsZXJ0ewogIHBhZGRpbmc6IDlweCAxNXB4OwogIG1hcmdpbjogNHB4OwogIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1yYWRpdXM6IDRweDsKfQoKLmthYXZpby1kaWZmdmlld2VyID4gLm92ZXJsYXkgLmFsZXJ0LmFsZXJ0LXN1Y2Nlc3N7CiAgYmFja2dyb3VuZC1jb2xvcjogI2RmZjBkODsKICBib3JkZXItY29sb3I6ICNkNmU5YzY7CiAgY29sb3I6ICMzYzc2M2Q7Cn0KCi5rYWF2aW8tZGlmZnZpZXdlciA+IC5vdmVybGF5IC5hbGVydC5hbGVydC1pbmZvewogIGJhY2tncm91bmQtY29sb3I6ICNkOWVkZjc7CiAgYm9yZGVyLWNvbG9yOiAjYmNlOGYxOwogIGNvbG9yOiAjMzE3MDhmOwp9Cgoua2FhdmlvLWRpZmZ2aWV3ZXIgPiAub3ZlcmxheSAuYWxlcnQuYWxlcnQtd2FybmluZ3sKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNmOGUzOwogIGJvcmRlci1jb2xvcjogI2ZhZWJjYzsKICBjb2xvcjogIzhhNmQzYjsKfQoKLmthYXZpby1kaWZmdmlld2VyID4gLm92ZXJsYXkgLmFsZXJ0LmFsZXJ0LWRhbmdlcnsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJkZWRlOwogIGJvcmRlci1jb2xvcjogI2ViY2NkMTsKICBjb2xvcjogI2E5NDQ0MjsKfQoKLyoqKioqKioqKioqKioqCiAgQ2hhbmdlcyBNYWluCiAqKioqKioqKioqKioqKi8KCi5jaGFuZ2VzIHsKICBtYXJnaW46IDAgMTJweDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMDsKCiAgZm9udC1mYW1pbHk6IEFyaWFsLCAiSGVsdmV0aWNhIE5ldWUiLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxM3B4Owp9CgouY2hhbmdlcy1jb250YWluZXIgewp9CgovKioqKioqKioqKioqKioKICBDaGFuZ2VzIFRpdGxlcwogKioqKioqKioqKioqKiovCgouY2hhbmdlcy10aXRsZSB7CiAgcGFkZGluZzogNXB4IDRweCAzcHg7CiAgYm9yZGVyOiAxcHggc29saWQgIzAwMDsKICBib3JkZXItYm90dG9tOiAwcHg7CgogIGZvbnQtc2l6ZTogMTZweDsKfQoKLmNoYW5nZXMtdGl0bGUgaXsKICBmb250LXNpemU6IDkwJTsKICBvcGFjaXR5OiAwLjg7CiAgZm9udC1zdHlsZTogbm9ybWFsOwp9CgouY2hhbmdlcy10aXRsZSBpLmljb257CiAgZm9udC1zaXplOiA5MCU7CiAgb3BhY2l0eTogMC44OwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogbm9ybWFsOwp9CgouY2hhbmdlcy1wYXJlbnQgc3BhbiB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwYWRkaW5nOiAwIDAgMCAxM3B4Owp9CgouY2hhbmdlcy1wYXJlbnQgc3BhbjpiZWZvcmUgewogIGNvbnRlbnQ6ICcnOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICBsZWZ0OiAzcHg7CiAgd2lkdGg6IDA7CiAgaGVpZ2h0OiAwOwogIG1hcmdpbjogLTZweCAwIDA7CiAgYm9yZGVyLXdpZHRoOiA1cHggMCA1cHggNnB4OwogIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgIzAwMDsKICBib3JkZXItc3R5bGU6IHNvbGlkOwp9Cgoub3BlbiA+IC5jaGFuZ2VzLXBhcmVudCBzcGFuOmJlZm9yZSB7CiAgbGVmdDogMDsKICBtYXJnaW4tdG9wOiAtNHB4OwogIGJvcmRlci13aWR0aDogNnB4IDVweCAwIDVweDsKICBib3JkZXItY29sb3I6ICMwMDAgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQ7Cn0KCi8qIE5lc3RpbmcgKi8KLmNoYW5nZXMtY29udGFpbmVyIC5jaGFuZ2VzLWNvbnRhaW5lciAuY2hhbmdlcy10aXRsZSB7CiAgZm9udC1zaXplOiAxNHB4Owp9Ci5jaGFuZ2VzLWNvbnRhaW5lciAuY2hhbmdlcy1jb250YWluZXIgLmNoYW5nZXMtY29udGFpbmVyIC5jaGFuZ2VzLXRpdGxlIHsKICBwYWRkaW5nLWxlZnQ6IDEwcHg7CiAgZm9udC1zaXplOiAxMnB4Owp9CgouY2hhbmdlcy1jb250YWluZXIuYWN0aXZlID4gLmNoYW5nZXMtdGl0bGUgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouY2hhbmdlcy1jb250YWluZXIuYWN0aXZlID4gLmNoYW5nZXMtdGl0bGU6YmVmb3JlLAouY2hhbmdlcy1jb250YWluZXIuYWN0aXZlID4gLmNoYW5nZXMtdGl0bGU6YWZ0ZXIgewogIGNvbnRlbnQ6ICcnOwogIGRpc3BsYXk6IG5vbmU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogNTAlOwogIG1hcmdpbjogLTEycHggMCAwOwogIHdpZHRoOiAwOwogIGhlaWdodDogMDsKICBib3JkZXItdG9wOiAxMnB4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1ib3R0b206IDEycHggc29saWQgdHJhbnNwYXJlbnQ7Cn0KCi5jaGFuZ2VzLWNvbnRhaW5lci5hY3RpdmUuZm9jdXMgPiAuY2hhbmdlcy10aXRsZXsKICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgMCAxMHB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMzUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggMHB4IHJnYmEoMCwgMCwgMCwgMC4zNSk7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgMTBweCAwcHggcmdiYSgwLCAwLCAwLCAwLjM1KTsKfQoKLmNoYW5nZXMtY29udGFpbmVyLmFjdGl2ZSA+IC5jaGFuZ2VzLXRpdGxlOmJlZm9yZSB7CiAgbGVmdDogLTEycHg7CiAgYm9yZGVyLXJpZ2h0OiAxMnB4IHNvbGlkICMwMDA7Cn0KCi5jaGFuZ2VzLWNvbnRhaW5lci5hY3RpdmUgPiAuY2hhbmdlcy10aXRsZTphZnRlciB7CiAgcmlnaHQ6IC0xMnB4OwogIGJvcmRlci1sZWZ0OiAxMnB4IHNvbGlkICMwMDA7Cn0KCi5jaGFuZ2VzLXRpdGxlLmNoYW5nZS1hZGRlZCB7CiAgYmFja2dyb3VuZDogI2E2YzBlMTsKfQouY2hhbmdlcy1jb250YWluZXIuYWN0aXZlID4gLmNoYW5nZXMtdGl0bGUuY2hhbmdlLWFkZGVkIHsKICBiYWNrZ3JvdW5kOiAjNmM5MWNjOwp9Ci5jaGFuZ2VzLWNvbnRhaW5lci5hY3RpdmUgPiAuY2hhbmdlcy10aXRsZS5jaGFuZ2UtYWRkZWQ6YWZ0ZXIgewogIGRpc3BsYXk6IGJsb2NrOwp9CgouY2hhbmdlcy10aXRsZS5jaGFuZ2UtdXBkYXRlZCB7CiAgYmFja2dyb3VuZDogI2ZlZmM5NjsKfQouY2hhbmdlcy1jb250YWluZXIuYWN0aXZlID4gLmNoYW5nZXMtdGl0bGUuY2hhbmdlLXVwZGF0ZWQgewogIGJhY2tncm91bmQ6ICNmZmY5NDQ7Cn0KLmNoYW5nZXMtY29udGFpbmVyLmFjdGl2ZSA+IC5jaGFuZ2VzLXRpdGxlLmNoYW5nZS11cGRhdGVkOmJlZm9yZSwKLmNoYW5nZXMtY29udGFpbmVyLmFjdGl2ZSA+IC5jaGFuZ2VzLXRpdGxlLmNoYW5nZS11cGRhdGVkOmFmdGVyIHsKICBkaXNwbGF5OiBibG9jazsKfQoKLmNoYW5nZXMtdGl0bGUuY2hhbmdlLXJlbW92ZWQgewogIGJhY2tncm91bmQ6ICNmOWE0YWY7Cn0KLmNoYW5nZXMtY29udGFpbmVyLmFjdGl2ZSA+IC5jaGFuZ2VzLXRpdGxlLmNoYW5nZS1yZW1vdmVkIHsKICBiYWNrZ3JvdW5kOiAjZjM2Yjc4Owp9Ci5jaGFuZ2VzLWNvbnRhaW5lci5hY3RpdmUgPiAuY2hhbmdlcy10aXRsZS5jaGFuZ2UtcmVtb3ZlZDpiZWZvcmUgewogIGRpc3BsYXk6IGJsb2NrOwp9CgouY2hhbmdlcy10aXRsZS5hY3RpdmUgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouY2hhbmdlcy10aXRsZS5hY3RpdmU6YmVmb3JlIHsKICBjb250ZW50OiAnJzsKICBwb3NpdGlvbjogYWJzb2x1dGU7Cn0KCgovKioqKioqKioqKioqKioKICBDaGFuZ2VzIExpc3QKICoqKioqKioqKioqKioqLwouY2hhbmdlcy1saXN0IHsKICBkaXNwbGF5OiBub25lOwp9CgouY2hhbmdlcy5jaGFuZ2VzLWxpc3QgewogIGRpc3BsYXk6IGJsb2NrOwp9CgouY2hhbmdlcy1jb250YWluZXIub3BlbiA+IC5jaGFuZ2VzLWxpc3QgewogIGRpc3BsYXk6IGJsb2NrOwp9CgovKioqKioqKioqKioqKioKICBDaGFuZ2VzIExpc3QKICoqKioqKioqKioqKioqLwovKi5jaGFuZ2VzLXRpdGxlLmFjdGl2ZSovCi5jaGFuZ2VzLXRpdGxlID4gLmVsZW1lbnQtY2hhbmdlcyB7CiAgZGlzcGxheTogbm9uZTsKfQoKLmFjdGl2ZSA+IC5jaGFuZ2VzLXRpdGxlID4gLmVsZW1lbnQtY2hhbmdlcyB7CiAgZGlzcGxheTogYmxvY2s7CiAgbWFyZ2luOiAwOwogIHBhZGRpbmc6IDRweCAwIDRweDsKICBsaW5lLWhlaWdodDogMS40OwogIGxpc3Qtc3R5bGU6IG5vbmU7CiAgd29yZC13cmFwOiBicmVhay13b3JkOwp9Cg==","base64");!function(e,t){function n(e,t){var i={added:[],removed:[],updated:[]};for(var o in e)t.hasOwnProperty(o)?e[o]!==t[o]&&s(e[o])&&s(t[o])&&i.updated.push({key:o,value:t[o],old:e[o]}):i.removed.push({key:o,value:e[o]});for(var n in t)e.hasOwnProperty(n)||i.added.push({key:n,value:t[n]});return i.added.length||i.removed.length||i.updated.length?i:null}function s(e){return Object.prototype.toString.apply(1)===Object.prototype.toString.apply(e)||Object.prototype.toString.apply("")===Object.prototype.toString.apply(e)}function a(e){var t="",i=[];for(var o in m)t=m[o],e.hasOwnProperty(t)&&(i.push({group:e[t],name:t}),delete e[t]);for(t in e)i.push({group:e[t],name:t});return i}function l(e,t){return e["gpml:element"]===t["gpml:element"]?e.shape>t.shape?1:-1:void 0===e["gpml:element"]?-1:void 0===t["gpml:element"]?1:e["gpml:element"]>t["gpml:element"]?1:-1}function d(e,t){return"gpml:Interaction"===e["gpml:element"]?""+p(e.points[0].isAttachedTo,t)+' <i class="icon icon-arrow-right"></i> '+p(e.points[1].isAttachedTo,t):"gpml:DataNode"===e["gpml:element"]?e.textContent:"gpml:Label"===e["gpml:element"]?e.textContent:"gpml:Shape"===e["gpml:element"]?e.shape.slice(0,1).toUpperCase()+e.shape.slice(1):"gpml:GraphicalLine"===e["gpml:element"]?"Graphical line":"gpml:State"===e["gpml:element"]?"State "+e.textContent+" ("+p(e.isAttachedTo,t)+")":"gpml:Group"===e["gpml:element"]?"Group":void 0!==e.type?e.textContent||e.title||e.displayName||"no title":"no title"}function p(e,t){if(void 0===e)return"Unknown";for(var i in t)if(null!==t[i].id&&e===t[i].id)return"gpml:Interaction"===t[i]["gpml:element"]?"Interaction":d(t[i],t);return e}function r(e,t,i){return-1!==u.indexOf(t)?Math.round(100*parseFloat(e))/100:-1!==v.indexOf(t)?p(e,i):e}function h(e){return e.length?e.parent().data("type"):null}i(o);var c={sourceData:[]},g=function(i,o){this.$pvjsElement=t(i),this.initContainer(),this.pvjsOptions=t.extend({},c,o[0]),this.pvjs=new e.Pvjs(this.$paneLeft[0],this.pvjsOptions).getPublicInstance(),this.pvjsOptions2=t.extend({},c,o[1]),this.pvjs2=new e.Pvjs(this.$paneRight[0],this.pvjsOptions2).getPublicInstance(),this.hookEvents(),this.pvjs.render(),this.pvjs2.render()};g.prototype.initContainer=function(){this.$diffviewer=t('<div class="pvjs-diffviewer"/>'),this.$paneLeft=t('<div class="pane-inner"></div>').appendTo(t('<div class="pane pane-left"></div>').appendTo(this.$diffviewer)),this.$paneRight=t('<div class="pane-inner"></div>').appendTo(t('<div class="pane pane-right"></div>').appendTo(this.$diffviewer)),this.$paneCenter=t('<div class="pane pane-center"></div>').appendTo(this.$diffviewer),this.$diffviewer.insertBefore(this.$pvjsElement),this.$paneLeft.append(this.$pvjsElement)},g.prototype.initSecondPvjs=function(){this.$pvjsElement2=t("<div/>").appendTo(this.$paneRight);var e=this.pvjs.getOptions();e.sourceData=this.pvjsOptions.sourceData,e.manualRender=!0,this.$pvjsElement2.pvjs(e),this.pvjs2=this.$pvjsElement2.pvjs("get").pop()},g.prototype.hookEvents=function(){var e=this,t=!1,i=!1,o=!1;this.pvjs.on("rendered",function(){t=!0,i&&!o&&e.onPvjsesRendered()}),this.pvjs2.on("rendered",function(){i=!0,t&&!o&&e.onPvjsesRendered()}),this.pvjs.on("error.sourceData",function(){o||e.onNoDiff("One or both pathways were not rendered. Most probably one pathways uses old format that is not supported by pvjs."),o=!0}),this.pvjs2.on("error.sourceData",function(){o||e.onNoDiff("One or both pathways were not rendered.Most probably one pathways uses old format that is not supported by pvjs."),o=!0}),this.pvjs.on("destroy.pvjs",function(){e.pvjs2.destroy(),e.$pvjsElement.insertBefore(e.$diffviewer),e.$diffviewer.remove()});var n=!1,s=!1,a=!1,l=!1;this.pvjs.on("zoomed.renderer",function(t){return l?void(l=!1):(s=!0,e.pvjs2.zoom(t/e.zoomScale),e.pvjs.panBy({x:0,y:0}),void e.pvjs2.pan(e.pvjs.getPan()))}),this.pvjs.on("panned.renderer",function(t){return a?void(a=!1):(n=!0,void e.pvjs2.pan(t))}),this.pvjs2.on("zoomed.renderer",function(t){return s?void(s=!1):(l=!0,e.pvjs.zoom(t*e.zoomScale),e.pvjs2.panBy({x:0,y:0}),void e.pvjs.pan(e.pvjs2.getPan()))}),this.pvjs2.on("panned.renderer",function(t){return n?void(n=!1):(a=!0,void e.pvjs.pan(t))})},g.prototype.onNoDiff=function(e){void 0===this.$overlay&&(this.$overlay=t('<div class="overlay"></div>').appendTo(this.$diffviewer)),this.$overlay.append(t('<div class="alert alert-info"></div>').text(e))},g.prototype.onPvjsesRendered=function(){this.checkPvjsesData()?(this.getZoomScale(),this.displayDiff()):this.onNoDiff("One or both pathways were rendered using a format (ex. png) that has no details about nodes.")},g.prototype.checkPvjsesData=function(){return this.pvjs.getSourceData().pvjson&&this.pvjs2.getSourceData().pvjson},g.prototype.zoomScale=1,g.prototype.getZoomScale=function(){this.zoomScale=this.pvjs.getZoom()/this.pvjs2.getZoom()},g.prototype.displayDiff=function(){this.elements=this.pvjs.getSourceData().pvjson.elements,this.elements2=this.pvjs2.getSourceData().pvjson.elements,this.elementsMerge=this.mergeElements(this.elements2,this.elements);var e=this.computeDiff();if(e.added.length+e.updated.length+e.removed.length===0)return void this.onNoDiff("Pathways have no visual differences between them.");var t=this.initDiffView();this.elementsCache={added:{},updated:{},removed:{}},this.elementsReferences={},this.renderDiffsOfType("added",e.added,t,this.elements2),this.renderDiffsOfType("updated",e.updated,t,this.elementsMerge),this.renderDiffsOfType("removed",e.removed,t,this.elements),this.hookDiffNavigation(),this.highlightType("added"),this.highlightType("updated"),this.highlightType("removed")},g.prototype.mergeElements=function(e,t){var i=e.slice(),o=!1;for(var n in t){o=!1;for(var s in i)if(i[s].id===t[n].id){o=!0;break}o||i.push(t[n])}return i},g.prototype.computeDiff=function(){for(var e,t,i=this.elements.slice(),o=this.elements2.slice(),s={updated:[],added:[],removed:[]},a=i.length-1;a>=0;a--){e=i[a],t=!1;for(var l=o.length-1;l>=0;l--)if(i[a].id===o[l].id){t=!0,n(i[a],o[l])&&s.updated.push({id:o[l].id,"gpml:element":o[l]["gpml:element"]||i[a]["gpml:element"]||void 0,type:o[l].type||i[a].type||void 0,shape:o[l].shape||i[a].shape||void 0,textContent:o[l].textContent||i[a].textContent||o[l].title||o[l].displayName||i[a].title||i[a].displayName||void 0,points:o[l].points||i[a].points||void 0,diff:n(i[a],o[l]),_element:i[a],_element2:o[l]}),i.splice(a,1),o.splice(l,1);break}t||s.removed.push(i[a])}return s.added=o.slice(),s},g.prototype.initDiffView=function(){return t('<div class="changes changes-list"></div>').appendTo(this.$paneCenter)},g.prototype.initDiffViewList=function(e,i,o){var n=t('<div class="changes-container" data-level="1" data-type="'+i+'">').appendTo(e).append(t('<div class="changes-title changes-parent change-'+i+'"><span>'+o+"</span></div>"));return t('<div class="changes-list"></div>').appendTo(n)},g.prototype.renderDiffsOfType=function(e,i,o,n){if(0!==i.length){var s=i.sort(l),d={},p="",r="",h="",c=null,g=[];for(var m in s){if(r=s[m]["gpml:element"]?s[m]["gpml:element"].replace(/^gpml\:/,""):"",h=s[m].type?s[m].type:"","Interaction"===r)p="Interactions";else if("DataNode"===r)p="Data Nodes";else{if(""===r&&""!==h)continue;p="Group"===r?"Groups":"Graphical Objects"}void 0===d[p]&&(d[p]=[]),d[p].push(s[m])}if(!t.isEmptyObject(d)){c=this.initDiffViewList(o,e,e.charAt(0).toUpperCase()+e.slice(1)),g=a(d);for(var u in g)this.renderDiffGroup(e,g[u].name,g[u].group,c,n)}}};var m=["Data Nodes","Groups","Interactions","Graphical Objects"];g.prototype.renderDiffGroup=function(e,i,o,n,s){var a,l,p,r=t('<div class="changes-container" data-level="2" data-type="'+e+'"/>').appendTo(n),h=(t('<div class="changes-title changes-parent change-'+e+'"><span>'+i+"</span></div>").appendTo(r).data("group",i),t('<div class="changes-list" />').appendTo(r)),c="",g=null;o=o.sort(function(e,t){return d(e,s).toLowerCase()>d(t,s).toLowerCase()?1:-1});for(var m in o){if(c=d(o[m],s),a=t('<div class="changes-container" data-level="3" data-type="'+e+'"/>').appendTo(h),l=t('<div class="changes-title change-'+e+'"><span>'+c+"</span></div>").appendTo(a),g=this.getElementChanges(e,o[m],s),g&&g.length){p=t('<ul class="element-changes"></ul>');for(var u in g)p.append("<li>"+g[u]+"</li>");p.appendTo(l)}l.data("id",o[m].id).data("group",i),l[0].pvjson=o[m],this.cacheElement(e,i,o[m].id)}},g.prototype.cacheElement=function(e,t,i){void 0===this.elementsCache[e][t]&&(this.elementsCache[e][t]=[]),this.elementsCache[e][t].push(i),"Reference"===t&&(this.elementsReferences[i]=!0)},g.prototype.getAllElementsIds=function(e,t){if(null===e||void 0===e)return[].concat(this.getAllElementsIds("added"),this.getAllElementsIds("updated"),this.getAllElementsIds("removed"));if(null===t||void 0===t){var i=[];for(var o in this.elementsCache[e])i=i.concat(this.getAllElementsIds(e,o));return i}return this.elementsCache[e][t].slice()},g.prototype.isIdReference=function(e){return this.elementsReferences[e]===!0};var u=["width","height","x","y","rotation"],v=["isPartOf","controller","controlled"];g.prototype.getElementChanges=function(e,t,i){var o=[];if("added"===e)t.hasOwnProperty("entityReference")&&o.push("Added <strong>reference</strong>: "+t.entityReference);else if("updated"===e){var n="",s="",a=t.diff;for(var l in a.added)s=r(a.added[l].value,a.added[l].key,i),o.push("Added: <strong>"+a.added[l].key+"</strong> "+s);for(var d in a.removed)s=r(a.removed[d].value,a.removed[d].key,i),o.push("Removed: <strong>"+a.removed[d].key+"</strong> "+s);for(var p in a.updated)n=r(a.updated[p].old,a.updated[p].key,i),s=r(a.updated[p].value,a.updated[p].key,i),o.push("<strong>"+a.updated[p].key+":</strong> "+n+' <i class="icon icon-arrow-right"></i> '+s)}return o},g.prototype.hookDiffNavigation=function(){var e=this.$paneCenter,i=this,o=!1,n=this.pvjs.getZoom(),s=this.pvjs2.getZoom();e.on("click",".changes-title",function(n){n.preventDefault(),n.stopPropagation(),o=!0;var s=t(this),a=s;s.parent().hasClass("active")||(e.find(".active").removeClass("active"),e.find(".open").removeClass("open"),e.find(".focus").removeClass("focus"),s.parent().addClass("active focus"),s.parentsUntil(e).addClass("open"),i.attenuate(),i.highlightIds(i.getTitleIds(a),h(a)))}).on("dblclick",".changes-title",function(e){e.preventDefault(),e.stopPropagation(),i.zoomToTitle(t(this),n,s)});var a={37:"left",38:"up",39:"right",40:"down"};t(document).click(function(){o=!1,e.find(".focus").removeClass("focus")}).keydown(function(e){return o&&!(e.keyCode<37||e.keyCode>40)?(e.preventDefault(),e.stopPropagation(),i.navigate(a[e.keyCode]),!1):void 0})},g.prototype.getTitleIds=function(e){var t=[];if(e.length){var i=+e.parent().data("level"),o=h(e),n=null,s=null;1===i||(2===i?n=e.data("group"):3===i&&(n=e.data("group"),s=e.data("id"))),t=this.getIds(o,n,s)}return t},g.prototype.getIds=function(e,t,i){var o=[];return o=e&&t&&i?[i]:this.getAllElementsIds(e,t)},g.prototype.highlightIds=function(e,t){var i={};"added"===t?i.backgroundColor=i.borderColor="#0E53A7":"updated"===t?i.backgroundColor=i.borderColor="#FFF700":"removed"===t&&(i.backgroundColor=i.borderColor="#F10026");for(var o in e){var n;n=this.isIdReference(e[o])?"xref:id:"+e[o]:"#"+e[o],("removed"===t||"updated"===t)&&this.pvjs.highlight(n,null,i),("updated"===t||"added"===t)&&this.pvjs2.highlight(n,null,i)}},g.prototype.highlightType=function(e){this.highlightIds(this.getIds(e),e)},g.prototype.highlightTitle=function(e){this.highlightIds(this.getTitleIds(e),h(e))},g.prototype.zoomToTitle=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=1);var o=h(e),n="added"===o?i:t,s=n,a="added"===o?this.pvjs2:this.pvjs,l=a.getSourceData().selector,d=l.getBBox(),p=this.getTitleIds(e),r=l.filteredByCallback(function(e){return void 0!==e.id&&-1!==p.indexOf(e.id)}),c=r.getBBox();if("updated"===o){r=this.pvjs2.getSourceData().selector.filteredByCallback(function(e){return void 0!==e.id&&-1!==p.indexOf(e.id)});var g=r.getBBox();c.left=Math.min(c.left,g.left),c.top=Math.min(c.top,g.top),c.right=Math.max(c.right,g.right),c.bottom=Math.max(c.bottom,g.bottom),c.width=Math.abs(c.right-c.left),c.height=Math.abs(c.bottom-c.top)}s=n/(Math.max(c.width/d.width,c.height/d.height)||1),s*=.7,a.zoom(s);var m=a.getZoom(),u=-c.left*m+c.width*m*.15,v=-c.top*m+c.height*m*.15;a.pan({x:u,y:v})},g.prototype.navigate=function(e){var t=this.$paneCenter,i=t.find(".focus").first(),o=null,n=null;"up"===e||"left"===e?(o=i.prev(),0===o.length&&(o=i.parent().closest(".changes-container"))):("down"===e||"right"===e)&&(o=i.children(".changes-list").children(".changes-container").first(),0===o.length&&(o=i.next(),0===o.length&&(o=i.parent().closest(".changes-container").next(),0===o.length&&(o=i.parent().closest(".changes-container").parent().closest(".changes-container").next())))),o&&o.length&&o.get(0)!==i.get(0)&&(t.find(".active").removeClass("active"),t.find(".open").removeClass("open"),t.find(".focus").removeClass("focus"),o.addClass("active focus open"),o.parentsUntil(t).addClass("open"),n=o.children(".changes-title"),n.offset().top<0?t.scrollTop(t.scrollTop()+n.offset().top):n.offset().top+n.outerHeight()>t.height()&&t.scrollTop(t.scrollTop()+(n.offset().top+n.outerHeight()-t.height())),this.attenuate(),this.highlightTitle(o.children(".changes-title")))},g.prototype.initHighlighting=function(){this.hi=e.pvjsHighlighter(this.pvjs,{displayInputField:!1}),this.hi2=e.pvjsHighlighter(this.pvjs2,{displayInputField:!1})},g.prototype.attenuate=function(){this.pvjs.attenuate(null),this.pvjs2.attenuate(null)},e.PvjsDiffViewer=g}(window,window.jQuery||window.Zepto)}).call(this,e("buffer").Buffer)},{buffer:"/Users/andersriutta/Sites/pvjs/node_modules/browserify/node_modules/buffer/index.js",fs:"/Users/andersriutta/Sites/pvjs/node_modules/browserify/lib/_empty.js","insert-css":"/Users/andersriutta/Sites/pvjs/node_modules/insert-css/index.js"}]},{},["./lib/diff-viewer/diff-viewer.js"])});
//# sourceMappingURL=pvjs.diff-viewer.min.js.map